name: Raspberry Pi Healthchecks
on:
  push:
    branches:
      - add-cron-jobs
  schedule:
    - cron: '*/5 * * * *'

jobs:
  ping-endpoint:
    name: Ping Endpoint
    runs-on: ubuntu-latest
    steps:
      - name: Ping homepage
        run: curl --head --silent --show-error --retry 3 https://www.zolly.ml | head -1
      - name: Ping healthchecks.io
        run: curl --head --silent --show-error --retry 3 "${URL}" | head -1
        env:
          URL: ${{ secrets.HEALTHCHECKS_PING }}
